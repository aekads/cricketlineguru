<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Scoreboard</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            background-color: #f0f0f0;
        }

        .scoreboard {
            display: flex;
            flex-direction: column;
            width: 100%;
            max-width: 1100px;
            background: linear-gradient(116.21deg, #052652 -3.25%, #2D9CDB 107.37%);
            border-radius: 15px;
            padding: 20px;
            color: white;
        }

        .left-panel {
            width: 100%;
            background-image: url(Rectangle\ 2.png);
            background-size: cover;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 20px;
        }

        .left-panel h2 {
            font-family: Poppins;
            font-weight: 700;
            font-size: 2.5rem;
            line-height: 1.2;
        }

        .left-panel h3 {
            font-family: Poppins;
            font-weight: 400;
            font-size: 1.5rem;
            line-height: 1.2;
        }

        .clock {
            font-family: 'Digital-7', sans-serif;
            font-weight: 400;
            font-size: 2.5rem;
            line-height: 1.2;
            margin: 10px 0;
            letter-spacing: 4px;
        }

        @font-face {
            font-family: 'Digital-7';
            src: url('fonts/digital-7.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }


        .qr-code {
            margin-top: 20px;
            padding: 10px;
        }

        .qr-code img {
            width: 100%;
            height: auto;
        }

        .adver {
            font-family: Poppins;
            font-weight: 600;
            font-size: 1.5rem;
            line-height: 1.5;
            margin: 10px 0;
        }

        .right-panel {
            width: 100%;
            padding: 0 10px;
        }

        .match-title {
            font-size: 2rem;
            text-align: center;
            margin-bottom: 15px;
        }

        .score-box {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: #3e83b2;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin-top: 10px;
        }

        .rcb {
            width: 23%;
        }

        .score {
            font-family: Montserrat;
            font-weight: 700;
            font-size: 4rem;
            line-height: 1;
            margin: 10px 0;
        }

        .overs {
            font-family: Montserrat;
            font-weight: 500;
            font-size: 2rem;
            line-height: 1.2;
        }

        .run-rate {
            font-family: Montserrat;
            font-weight: 500;
            font-size: 1.5rem;
            line-height: 1.2;
        }

        .info-row {
            display: flex;
            flex-direction: column;
            background: rgba(141, 2, 2, 0.1);
            padding: 20px;
            margin-top: 10px;
            border-radius: 5px;
            gap: 5%;
        }

        .bowler-info,
        .batsman-info {
            width: 100%;
            line-height: 40px;
            margin-bottom: 10px;
        }

        .batsman-info p,
        .bowler-info p {
            display: flex;
            justify-content: space-between;
        }

        .headline {
            margin-top: 10px;
            font-size: 1.2rem;
            text-align: center;
            color: rgba(255, 255, 255, 1);
        }

        .live-tag {
            background: green;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 1.5rem;
            margin-left: 10px;
        }

        .liveDot {
            margin-bottom: 2px;
        }

        .bowler-balls {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .ball {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: white;
            color: black;
            font-weight: bold;
            border: 1px solid #ccc;
        }

        @media (min-width: 768px) {
            .scoreboard {
                flex-direction: row;
            }

            .left-panel {
                width: 25%;
                margin-bottom: 0;
            }

            .right-panel {
                width: 75%;
                padding: 0 20px 0 40px;
            }

            .score-box {
                flex-direction: row;
                justify-content: space-around;
            }

            .info-row {
                flex-direction: row;
            }

            .bowler-info,
            .batsman-info {
                width: 48%;
            }

            .score {
                font-size: 11rem;
            }

            .overs {
                font-size: 3rem;
            }

            .run-rate {
                font-size: 1.7rem;
            }

            .headline {
                font-size: 1.5rem;
            }
        }
    </style>
</head>

<body>

    <div class="scoreboard">
        <div class="left-panel">
            <div style="line-height: 44px;">
                <h2>Tuesday</h2>
                <h3>Evening</h3>
            </div>
            <svg width="200" height="4" viewBox="0 0 339 4" fill="none" xmlns="http://www.w3.org/2000/svg">
                <line x1="0.00195312" y1="2.47009" x2="338.582" y2="2.47009" stroke="white" stroke-opacity="0.4"
                    stroke-width="3" />
            </svg>

            <div class="clock" id="clock">00:00:00</div>
            <p class="datee">10 December 2024</p>

            <svg width="200" height="4" viewBox="0 0 339 4" fill="none" xmlns="http://www.w3.org/2000/svg">
                <line x1="0.00195312" y1="2.47009" x2="338.582" y2="2.47009" stroke="white" stroke-opacity="0.4"
                    stroke-width="3" />
            </svg>

            <div class="qr-code">
                <img src="QR.png" alt="QR Code" width="100">
            </div>
            <p class="adver">Advertise Here</p>
            <p class="adver">+91 8090802014</p>
        </div>

        <div class="right-panel">
            <div class="match-title">Indian Premier League, 25th Match <span class="live-tag"><svg class="liveDot" width="12" height="12"
                        viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="7.72684" cy="7.4849" r="7.24247" fill="white" />
                    </svg>
                    LIVE</span></div>
            <div class="score-box">
                <div>
                <img class="rcb" src="image.png" alt="RCB Logo" width="50">
                <h2  id="matchTitle">-</h2>
            </div>
                <div class="score-box">
                    <!-- <img id="teamLogo" src="image.png" alt="Team Logo" width="50"> -->
                    <div>
                        <div class="score" id="teamScore">-</div>
                        <div>
                            <div class="overs" id="overs">OVER: -</div>
                            <div class="run-rate" id="runRate">RUN RATE: -</div>               
                        </div>
                    </div>
                </div>

            </div>                                                                                           

            <div class="info-row">
                <div class="bowler-info">
                    <p><strong id="bowlerName">-</strong> <span id="bowlerStats">-</span></p>
                    <p class="bowler-balls" id="bowlerBalls"></p>
                </div>
                <div class="batsman-info">
                    <p><strong id="batsman1">-</strong> <span id="batsman1Stats">-</span></p>
                    <p><strong id="batsman2">-</strong> <span id="batsman2Stats">-</span></p>
                </div>
            </div>

            <h1 class="headline"> <svg width="18" height="18" viewBox="0 0 22 22" fill="none"
                    xmlns="http://www.w3.org/2000/svg">
                    <circle cx="11" cy="11" r="11" fill="#00A050" />
                </svg>
                Headline Here SCdsgrger srgerhet grgeg, trhrjyjjrt.</h1>
        </div>
    </div>                                                                               
                                                                                            
    <script>
    document.addEventListener("DOMContentLoaded", () => {
    function updateClock() {
        let now = new Date();
        let hours = now.getHours();
        let minutes = now.getMinutes();
        let seconds = now.getSeconds();
        let ampm = hours >= 12 ? 'PM' : 'AM';
        hours = hours % 12 || 12;
        minutes = minutes < 10 ? '0' + minutes : minutes;
        seconds = seconds < 10 ? '0' + seconds : seconds;
        document.getElementById("clock").innerText = `${hours}:${minutes}:${seconds} ${ampm}`;
    }
    setInterval(updateClock, 1000);
    updateClock();

    async function fetchData() {
        try {
            const response = await fetch('/api/live-match');
            const data = await response.json();
            console.log("API Response:", data); // Debugging

            if (!data) {
                console.error("No data received from API.");
                return;
            }

            // Ensure elements exist before updating
            if (document.getElementById('matchTitle')) {
                document.getElementById('matchTitle').innerText = data.matchTitle || 'Match Title';
            }
            if (document.getElementById('matchStatus')) {
                document.getElementById('matchStatus').innerText = data.matchStatus || 'Status';
            }

            

            // const team = data.currentScore?.[0] || { score: '-', overs: '-', runRate: '-' };

            // const runs = parseInt(team.score) || 0;
            // const overs = parseFloat(team.overs) || 0;

            
            // if (document.getElementById('teamScore')) {                      
            //     document.getElementById('teamScore').innerText = team.score;
            // }
            // if (document.getElementById('overs')) {
            //     document.getElementById('overs').innerText = `OVER: ${team.overs}`;
            // }
            // if (document.getElementById('runRate')) {
            //     document.getElementById('runRate').innerText = `RUN RATE: ${team.runRate}`;
            // }

             // Update team score and overs
        const team = data.currentScore?.[0] || { score: '-', overs: '-' };
        const runs = parseInt(team.score) || 0;
        const overs = parseFloat(team.overs) || 0;

        if (document.getElementById('teamScore')) {
            document.getElementById('teamScore').innerText = team.score;
        }
        if (document.getElementById('overs')) {
            document.getElementById('overs').innerText = `OVER: ${team.overs}`;
        }


        //Run Rate                                                               
        let runRate = overs > 0 ? (runs / overs).toFixed(2) : "-";  
        if (document.getElementById('runRate')) {
            document.getElementById('runRate').innerText = `RUN RATE: ${runRate}`;
        }

            if (data.bowler) {
                if (document.getElementById('bowlerName')) {
                    document.getElementById('bowlerName').innerText = data.bowler.name;
                }
                if (document.getElementById('bowlerStats')) {
                    document.getElementById('bowlerStats').innerText = data.bowler.stats;
                }
                if (document.getElementById('bowlerBalls')) {
                    const ballHTML = data.bowler.last6Balls.map(ball => {
                        let className = 'ball';
                        if (ball === 'W') className += ' W';
                        else if (ball === '4') className += ' F';
                        else if (ball === '6') className += ' S';
                        return `<span class="${className}">${ball}</span>`;
                    }).join('');
                    document.getElementById('bowlerBalls').innerHTML = ballHTML;
                }
            }

            const batsman1 = data.batsmen?.[0] || { name: '-', runs: '-', balls: '-' };
            const batsman2 = data.batsmen?.[1] || { name: '-', runs: '-', balls: '-' };
            if (document.getElementById('batsman1')) {
                document.getElementById('batsman1').innerText = batsman1.name;
            }
            if (document.getElementById('batsman1Stats')) {
                document.getElementById('batsman1Stats').innerText = `${batsman1.runs} (${batsman1.balls})`;
            }
            if (document.getElementById('batsman2')) {
                document.getElementById('batsman2').innerText = batsman2.name;
            }
            if (document.getElementById('batsman2Stats')) {
                document.getElementById('batsman2Stats').innerText = `${batsman2.runs} (${batsman2.balls})`;
            }

            if (document.getElementById('lastUpdated')) {
                document.getElementById('lastUpdated').innerText = new Date(data.lastUpdated).toLocaleString();
            }
        } catch (error) {
            console.error('Failed to fetch live data', error);
        }
    }

    fetchData();
    setInterval(fetchData, 10000);
});

    </script>

</body>

</html>
